app: gimp

ingredients:
  package: gimp
  dist:    trusty
  sources:
    - deb http://archive.ubuntu.com/ubuntu/ trusty main universe
  ppas:
    - otto-kesselgulasch/gimp-edge

script:
  - cat > ./AppRun <<\EOF
  - #!/bin/sh
  - cd "$(dirname "${0}")/usr"
  - export BABL_PATH=./lib/x86_64-linux-gnu/babl-0.1/
  - export GEGL_PATH=./lib/x86_64-linux-gnu/gegl-0.3/
  - export LD_LIBRARY_PATH="./lib:./lib/x86_64-linux-gnu/:${LD_LIBRARY_PATH}"
  - export PATH="./bin/:./sbin/:../bin/:../sbin/:${PATH}"
  - exec gimp-2.9 "$@"
  - EOF
  - chmod a+x ./AppRun
  - # The original desktop file is a bit strange, hence we provide our own
  - cat > gimp.desktop <<\EOF
  - [Desktop Entry]
  - Version=1.0
  - Type=Application
  - Name=GIMP
  - GenericName=Image Editor
  - Comment=Create images and edit photographs
  - Exec=gimp
  - Icon=gimp
  - Terminal=false
  - Categories=Graphics;2DGraphics;RasterGraphics;GTK;
  - StartupNotify=true
  - MimeType=image/bmp;image/g3fax;image/gif;image/x-fits;image/x-pcx;image/x-portable-anymap;image/x-portable-bitmap;image/x-portable-graymap;image/x-portable-pixmap;image/x-psd;image/x-sgi;image/x-tga;image/x-xbitmap;image/x-xwindowdump;image/x-xcf;image/x-compressed-xcf;image/x-gimp-gbr;image/x-gimp-pat;image/x-gimp-gih;image/tiff;image/jpeg;image/x-psp;application/postscript;image/png;image/x-icon;image/x-xpixmap;image/x-exr;image/svg+xml;image/x-wmf;image/jp2;image/jpeg2000;image/jpx;image/x-xcursor;
  - EOF
