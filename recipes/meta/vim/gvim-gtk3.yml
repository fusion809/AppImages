app: gvim-gtk3
binpatch: true

ingredients:
  package: vim-gtk3
  dist:    trusty
  sources:
    - deb http://archive.ubuntu.com/ubuntu/ trusty main restricted
    - deb http://archive.ubuntu.com/ubuntu/ trusty universe
    - deb http://archive.ubuntu.com/ubuntu/ trusty-updates main restricted
    - deb http://archive.ubuntu.com/ubuntu/ trusty-updates universe
    - deb http://archive.ubuntu.com/ubuntu/ trusty-security main restricted
    - deb http://archive.ubuntu.com/ubuntu/ trusty-security universe
  ppas:
    - jonathonf/vim

script:
  # Needed due to missing icon file for gvim
  - cp ./usr/share/icons/hicolor/scalable/apps/gvim.svg .
  # Needed due to missing gvim binary that is mentioned in gvim.desktop file
  - cd ./usr/bin
  - ln -sf vim.gtk gvim
  - cd -
  - cp ./usr/share/applications/gvim.desktop .
  - sed -i -e 's/Name=GVim/Name=gvim-gtk3/g' gvim.desktop
